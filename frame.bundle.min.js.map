{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 78da6f7e83a053d3ba3f","webpack:///frame.bundle.min.js","webpack:///./base-storage.js","webpack:///./utils/constants.js","webpack:///./strategies/frame-storage.js","webpack:///../node_modules/message-channel/connect.js","webpack:///../node_modules/message-channel/dist/src/connect/connect.js","webpack:///../node_modules/message-channel/dist/src/connect/send-factory.js","webpack:///../node_modules/uuid/v4.js","webpack:///../node_modules/uuid/lib/rng-browser.js","webpack:///../node_modules/uuid/lib/bytesToUuid.js","webpack:///../node_modules/message-channel/dist/src/utils.js","webpack:///../node_modules/message-channel/dist/src/constants.js","webpack:///../node_modules/greedy-split/dist/src/index.js","webpack:///./global-frame.js","webpack:///./frame.js","webpack:///./data-capsule.js"],"names":["root","factory","exports","module","define","amd","self","this","__webpack_require__","moduleId","installedModules","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","window","__STATICS_BASE_URL__","s","0","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","BaseStorage","forEach","method","Error","value","scope","options","strategy","1","toError","str","keys","errors","map","find","err","message","NOT_FOUND","SERVER_ERROR","LOCAL_STORAGE_UNSUPPORTED","PREFIX_SEPARATOR","KEY_SEPARATOR","STORAGE_PREFIX","CONNECTION_MAX_TIMEOUT","MESSAGE_MAX_TIMEOUT","14","_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","push","Array","isArray","greedySplit","require","connectMessageChannel","_require","FrameStorageStrategy","origin","token","opts","channel","connectionMaxTimeout","messageMaxTimeout","_BaseStorage","Promise","resolve","then","params","payload","data","getChannel","sendToChannel","JSON","stringify","join","e","status","parse","sendCommand","15","16","connect","arguments","_options$targetOrigin","targetOrigin","_options$connectionMa","_constants","deafultConnectionMaxTimeout","_options$messageMaxTi","deafultMessageMaxTimeout","reject","setTimeout","MessageChannel","port1","onmessage","connectionSuccessMsg","_sendFactory2","default","connectionMessage","_utils","constructConnectionMessage","parent","postMessage","port2","_sendFactory","obj","17","sendFactory","port","messages","_parseChannelMessage","parseChannelMessage","id","modifiedEvent","lastEventId","source","ports","transferList","messageId","_v2","packaged","constructChannelMessage","_v","18","v4","buf","offset","rnds","random","rng","ii","bytesToUuid","19","getRandomValues","crypto","bind","msCrypto","rnds8","Uint8Array","r","Math","20","bth","byteToHex","toString","substr","3","parseConnectionMessage","messageDelimiter","firstDelimiterIndex","indexOf","slice","connectionRequestMsg","4","5","separator","limit","result","split","reduce","x","separatorLength","match","shift","53","dataCapsuleTools","DataCapsuleTools","54","DataCapsule","8","validateNamespace","namespace","storageStrategy","verify","_options","capsuleOptions","assign","extendScope","_buildValidateOptions","setItem","getItem","removeItem","getAllItems"],"mappings":"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","file":"frame.bundle.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"data-capsule\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"data-capsule\"] = factory();\n\telse\n\t\troot[\"data-capsule\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t__webpack_require__.p = typeof window !== 'undefined' && window.__STATICS_BASE_URL__ || __webpack_require__.p;\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 53);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 78da6f7e83a053d3ba3f","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"data-capsule\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"data-capsule\"] = factory();\n\telse\n\t\troot[\"data-capsule\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t__webpack_require__.p = typeof window !== 'undefined' && window.__STATICS_BASE_URL__ || __webpack_require__.p;\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 53);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 0:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar BaseStorage = function () {\n  function BaseStorage() {\n    var _this = this;\n\n    _classCallCheck(this, BaseStorage);\n\n    ['setItem', 'getItem', 'removeItem', 'getAllItems'].forEach(function (method) {\n      if (_this[method] === BaseStorage.prototype[method]) {\n        throw new Error('BaseStorage method [' + method + '] must be overriden!');\n      }\n    });\n  }\n\n  _createClass(BaseStorage, [{\n    key: 'extendScope',\n    value: function extendScope(scope) {\n      return scope;\n    }\n  }, {\n    key: 'setItem',\n    value: function setItem(key, value, options) {\n      throw options;\n    }\n  }, {\n    key: 'getItem',\n    value: function getItem(key, options) {\n      throw options;\n    }\n  }, {\n    key: 'removeItem',\n    value: function removeItem(key, options) {\n      throw options;\n    }\n  }, {\n    key: 'getAllItems',\n    value: function getAllItems(options) {\n      throw options;\n    }\n  }], [{\n    key: 'verify',\n    value: function verify(strategy) {\n      if (strategy instanceof BaseStorage) {\n        return strategy;\n      } else {\n        throw new Error('This class must extend BaseStorage!');\n      }\n    }\n  }]);\n\n  return BaseStorage;\n}();\n\nmodule.exports = BaseStorage;\n\n/***/ }),\n\n/***/ 1:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar errors = {\n  NOT_FOUND: new Error('Key was not found in capsule'),\n  SERVER_ERROR: new Error('Failed to perform operarion on server'),\n  LOCAL_STORAGE_UNSUPPORTED: new Error('LocalStorage is not supported')\n};\n\nfunction toError(str) {\n  return Object.keys(errors).map(function (key) {\n    return errors[key];\n  }).find(function (err) {\n    return err.message === str;\n  }) || new Error(str);\n}\n\nmodule.exports = {\n  PREFIX_SEPARATOR: '|',\n  KEY_SEPARATOR: '#',\n  STORAGE_PREFIX: 'capsule',\n  NOT_FOUND: errors.NOT_FOUND,\n  CONNECTION_MAX_TIMEOUT: 2000,\n  MESSAGE_MAX_TIMEOUT: 8000,\n  SERVER_ERROR: errors.SERVER_ERROR,\n  toError: toError,\n  LOCAL_STORAGE_UNSUPPORTED: errors.LOCAL_STORAGE_UNSUPPORTED\n};\n\n/***/ }),\n\n/***/ 14:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar greedySplit = __webpack_require__(5);\nvar connectMessageChannel = __webpack_require__(15);\nvar BaseStorage = __webpack_require__(0);\n\nvar _require = __webpack_require__(1),\n    CONNECTION_MAX_TIMEOUT = _require.CONNECTION_MAX_TIMEOUT,\n    MESSAGE_MAX_TIMEOUT = _require.MESSAGE_MAX_TIMEOUT,\n    toError = _require.toError;\n\nvar FrameStorageStrategy = function (_BaseStorage) {\n  _inherits(FrameStorageStrategy, _BaseStorage);\n\n  function FrameStorageStrategy(target, origin, token) {\n    var opts = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n    _classCallCheck(this, FrameStorageStrategy);\n\n    var _this = _possibleConstructorReturn(this, (FrameStorageStrategy.__proto__ || Object.getPrototypeOf(FrameStorageStrategy)).call(this));\n\n    _this.target = target;\n    _this.origin = origin;\n    _this.token = token;\n    _this.channel;\n    _this.opts = opts;\n    var _this$opts = _this.opts,\n        _this$opts$connection = _this$opts.connectionMaxTimeout,\n        connectionMaxTimeout = _this$opts$connection === undefined ? CONNECTION_MAX_TIMEOUT : _this$opts$connection,\n        _this$opts$messageMax = _this$opts.messageMaxTimeout,\n        messageMaxTimeout = _this$opts$messageMax === undefined ? MESSAGE_MAX_TIMEOUT : _this$opts$messageMax;\n\n    _this.connectionMaxTimeout = connectionMaxTimeout;\n    _this.messageMaxTimeout = messageMaxTimeout;\n    return _this;\n  }\n\n  _createClass(FrameStorageStrategy, [{\n    key: 'getChannel',\n    value: function getChannel() {\n      var _this2 = this;\n\n      if (this.channel) {\n        return Promise.resolve(this.channel);\n      }\n\n      return connectMessageChannel('data-capsule', {\n        target: this.target,\n        origin: this.origin,\n        connectionMaxTimeout: this.connectionMaxTimeout,\n        messageMaxTimeout: this.messageMaxTimeout\n      }).then(function (channel) {\n        _this2.channel = channel;\n        return channel;\n      });\n    }\n  }, {\n    key: 'sendCommand',\n    value: function sendCommand(method, params) {\n      var _this3 = this;\n\n      var payload = { data: params };\n\n      return this.getChannel().then(function (sendToChannel) {\n        var message = [_this3.token, method, JSON.stringify(payload)].join('|');\n\n        return sendToChannel(message).then(function (e) {\n          var _greedySplit = greedySplit(e.data, '|', 2),\n              _greedySplit2 = _slicedToArray(_greedySplit, 2),\n              status = _greedySplit2[0],\n              payload = _greedySplit2[1];\n\n          if (status === 'reject') {\n            throw toError(payload);\n          }\n\n          return JSON.parse(payload).data;\n        });\n      });\n    }\n  }, {\n    key: 'setItem',\n    value: function setItem() {\n      for (var _len = arguments.length, params = Array(_len), _key = 0; _key < _len; _key++) {\n        params[_key] = arguments[_key];\n      }\n\n      return this.sendCommand('setItem', params);\n    }\n  }, {\n    key: 'getItem',\n    value: function getItem() {\n      for (var _len2 = arguments.length, params = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        params[_key2] = arguments[_key2];\n      }\n\n      return this.sendCommand('getItem', params);\n    }\n  }, {\n    key: 'removeItem',\n    value: function removeItem() {\n      for (var _len3 = arguments.length, params = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        params[_key3] = arguments[_key3];\n      }\n\n      return this.sendCommand('removeItem', params);\n    }\n  }, {\n    key: 'getAllItems',\n    value: function getAllItems() {\n      for (var _len4 = arguments.length, params = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        params[_key4] = arguments[_key4];\n      }\n\n      return this.sendCommand('getAllItems', params);\n    }\n  }]);\n\n  return FrameStorageStrategy;\n}(BaseStorage);\n\nmodule.exports = FrameStorageStrategy;\n\n/***/ }),\n\n/***/ 15:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(16);\n\n\n/***/ }),\n\n/***/ 16:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _constants = __webpack_require__(4);\n\nvar _utils = __webpack_require__(3);\n\nvar _sendFactory = __webpack_require__(17);\n\nvar _sendFactory2 = _interopRequireDefault(_sendFactory);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction connect(scope) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var _options$targetOrigin = options.targetOrigin,\n      targetOrigin = _options$targetOrigin === undefined ? '*' : _options$targetOrigin,\n      _options$connectionMa = options.connectionMaxTimeout,\n      connectionMaxTimeout = _options$connectionMa === undefined ? _constants.deafultConnectionMaxTimeout : _options$connectionMa,\n      _options$messageMaxTi = options.messageMaxTimeout,\n      messageMaxTimeout = _options$messageMaxTi === undefined ? _constants.deafultMessageMaxTimeout : _options$messageMaxTi;\n\n\n  return new Promise(function (resolve, reject) {\n    setTimeout(function () {\n      reject(new Error('max timeout of ' + connectionMaxTimeout + 'ms exceeded'));\n    }, connectionMaxTimeout);\n\n    var channel = new window.MessageChannel();\n\n    channel.port1.onmessage = function (e) {\n      if (e.data === _constants.connectionSuccessMsg) {\n        return resolve((0, _sendFactory2.default)(channel.port1, { messageMaxTimeout: messageMaxTimeout }));\n      } else {\n        reject(new Error('connection could not establise'));\n      }\n    };\n\n    var connectionMessage = (0, _utils.constructConnectionMessage)(scope);\n    window.parent.postMessage(connectionMessage, targetOrigin, [channel.port2]);\n  });\n}\n\nmodule.exports = connect;\n\n/***/ }),\n\n/***/ 17:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = sendFactory;\n\nvar _utils = __webpack_require__(3);\n\nvar _v = __webpack_require__(18);\n\nvar _v2 = _interopRequireDefault(_v);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction sendFactory(port, options) {\n  var messageMaxTimeout = options.messageMaxTimeout;\n\n  var messages = {};\n\n  port.onmessage = function (e) {\n    var _parseChannelMessage = (0, _utils.parseChannelMessage)(e.data),\n        id = _parseChannelMessage.id,\n        payload = _parseChannelMessage.payload;\n\n    if (messages[id]) {\n      var modifiedEvent = {\n        data: payload,\n        origin: e.origin,\n        lastEventId: e.lastEventId,\n        source: e.source,\n        ports: e.ports\n      };\n\n      messages[id](modifiedEvent);\n    }\n  };\n\n  return function (message, transferList) {\n    return new Promise(function (resolve, reject) {\n      setTimeout(function () {\n        reject(new Error('max timeout of ' + messageMaxTimeout + 'ms exceeded'));\n      }, messageMaxTimeout);\n\n      var messageId = (0, _v2.default)();\n      var packaged = (0, _utils.constructChannelMessage)(message, messageId);\n      messages[messageId] = resolve;\n      return port.postMessage(packaged, transferList);\n    });\n  };\n}\n\n/***/ }),\n\n/***/ 18:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar rng = __webpack_require__(19);\nvar bytesToUuid = __webpack_require__(20);\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n\n\n/***/ }),\n\n/***/ 19:\n/***/ (function(module, exports) {\n\n// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n\n\n/***/ }),\n\n/***/ 20:\n/***/ (function(module, exports) {\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n\n\n/***/ }),\n\n/***/ 3:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.parseConnectionMessage = exports.constructConnectionMessage = exports.parseChannelMessage = exports.constructChannelMessage = undefined;\n\nvar _constants = __webpack_require__(4);\n\nvar constructChannelMessage = exports.constructChannelMessage = function constructChannelMessage(payload, id) {\n  if (!id) {\n    return payload;\n  }\n\n  return id + _constants.messageDelimiter + payload;\n};\n\nvar parseChannelMessage = exports.parseChannelMessage = function parseChannelMessage(message) {\n  var firstDelimiterIndex = message.indexOf(_constants.messageDelimiter);\n  if (firstDelimiterIndex === -1) {\n    return { id: null, payload: message };\n  }\n\n  var id = message.slice(0, firstDelimiterIndex);\n  var payload = message.slice(firstDelimiterIndex + 1);\n  return { id: id, payload: payload };\n};\n\nvar constructConnectionMessage = exports.constructConnectionMessage = function constructConnectionMessage(scope) {\n  return _constants.connectionRequestMsg + _constants.messageDelimiter + scope;\n};\n\nvar parseConnectionMessage = exports.parseConnectionMessage = function parseConnectionMessage(message) {\n  var firstDelimiterIndex = message.indexOf(_constants.messageDelimiter);\n  if (firstDelimiterIndex === -1 || message.slice(0, firstDelimiterIndex) !== _constants.connectionRequestMsg) {\n    throw new Error('Invalid connection message');\n  }\n\n  var scope = message.slice(firstDelimiterIndex + 1);\n  return scope;\n};\n\n/***/ }),\n\n/***/ 4:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar connectionRequestMsg = exports.connectionRequestMsg = 'req_con';\nvar connectionSuccessMsg = exports.connectionSuccessMsg = 'connection_success';\nvar messageDelimiter = exports.messageDelimiter = '|';\nvar deafultConnectionMaxTimeout = exports.deafultConnectionMaxTimeout = 200;\nvar deafultMessageMaxTimeout = exports.deafultMessageMaxTimeout = 5000;\n\n/***/ }),\n\n/***/ 5:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nfunction greedySplit(str, separator, limit) {\n  var result = str.split(separator, limit);\n  if (result.length === limit) {\n    var length = 0;\n    if (typeof separator === 'string') {\n      length = result.join(separator).length;\n    } else {\n      length = result.reduce(function (l, x, i) {\n        var separatorLength = 0;\n        if (i + 1 < limit) {\n          separatorLength = str.slice(l).match(separator).shift().length;\n        }\n        return l + x.length + separatorLength;\n      }, 0);\n    }\n    result[limit - 1] += str.slice(length);\n  }\n  return result;\n}\n\nmodule.exports = greedySplit;\n//# sourceMappingURL=index.js.map\n\n\n/***/ }),\n\n/***/ 53:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* global window */\n\n\nvar dataCapsuleTools = __webpack_require__(54);\n\nif (typeof window !== 'undefined') {\n  window.DataCapsuleTools = dataCapsuleTools;\n}\n\nmodule.exports = dataCapsuleTools;\n\n/***/ }),\n\n/***/ 54:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar FrameStorageStrategy = __webpack_require__(14);\n\nvar _require = __webpack_require__(1),\n    NOT_FOUND = _require.NOT_FOUND;\n\nvar BaseStorage = __webpack_require__(0);\nvar DataCapsule = __webpack_require__(8);\n\nmodule.exports = {\n  NOT_FOUND: NOT_FOUND,\n  BaseStorage: BaseStorage,\n  DataCapsule: DataCapsule,\n  FrameStorageStrategy: FrameStorageStrategy\n};\n\n/***/ }),\n\n/***/ 8:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar BaseStorage = __webpack_require__(0);\n\nfunction validateNamespace(options) {\n  if (!options.namespace) {\n    throw new Error('namespace is required');\n  } else if (typeof options.namespace !== 'string') {\n    throw new Error('namespace should be a string');\n  }\n}\n\nvar DataCapsule = function (_BaseStorage) {\n  _inherits(DataCapsule, _BaseStorage);\n\n  function DataCapsule(_ref) {\n    var strategy = _ref.strategy,\n        namespace = _ref.namespace,\n        scope = _ref.scope;\n\n    _classCallCheck(this, DataCapsule);\n\n    var _this = _possibleConstructorReturn(this, (DataCapsule.__proto__ || Object.getPrototypeOf(DataCapsule)).call(this));\n\n    _this.storageStrategy = BaseStorage.verify(strategy);\n    _this._options = { namespace: namespace, scope: scope };\n    return _this;\n  }\n\n  _createClass(DataCapsule, [{\n    key: '_buildValidateOptions',\n    value: function _buildValidateOptions(capsuleOptions, options) {\n      options = Object.assign({}, capsuleOptions, options);\n      options.scope = this.storageStrategy.extendScope(options.scope);\n      validateNamespace(options);\n      return options;\n    }\n  }, {\n    key: 'setItem',\n    value: function setItem(key, value, options) {\n      options = this._buildValidateOptions(this._options, options);\n      return this.storageStrategy.setItem(key, value, options);\n    }\n  }, {\n    key: 'getItem',\n    value: function getItem(key, options) {\n      options = this._buildValidateOptions(this._options, options);\n      return this.storageStrategy.getItem(key, options);\n    }\n  }, {\n    key: 'removeItem',\n    value: function removeItem(key, options) {\n      options = this._buildValidateOptions(this._options, options);\n      return this.storageStrategy.removeItem(key, options);\n    }\n  }, {\n    key: 'getAllItems',\n    value: function getAllItems(options) {\n      options = this._buildValidateOptions(this._options, options);\n      return this.storageStrategy.getAllItems(options);\n    }\n  }]);\n\n  return DataCapsule;\n}(BaseStorage);\n\nmodule.exports = DataCapsule;\n\n/***/ })\n\n/******/ });\n});\n\n\n// WEBPACK FOOTER //\n// frame.bundle.min.js","'use strict';\n\nclass BaseStorage {\n  constructor() {\n    ['setItem', 'getItem', 'removeItem', 'getAllItems'].forEach(method => {\n      if (this[method] === BaseStorage.prototype[method]) {\n        throw new Error(`BaseStorage method [${method}] must be overriden!`);\n      }\n    });\n  }\n\n  extendScope(scope) {\n    return scope;\n  }\n\n  setItem(key, value, options) {\n    throw options;\n  }\n\n  getItem(key, options) {\n    throw options;\n  }\n\n  removeItem(key, options) {\n    throw options;\n  }\n\n  getAllItems(options) {\n    throw options;\n  }\n\n  static verify(strategy) {\n    if (strategy instanceof BaseStorage) {\n      return strategy;\n    } else {\n      throw new Error(`This class must extend BaseStorage!`);\n    }\n  }\n}\n\nmodule.exports = BaseStorage;\n\n\n\n// WEBPACK FOOTER //\n// ./base-storage.js","const errors = {\n  NOT_FOUND: new Error('Key was not found in capsule'),\n  SERVER_ERROR: new Error('Failed to perform operarion on server'),\n  LOCAL_STORAGE_UNSUPPORTED: new Error('LocalStorage is not supported')\n};\n\nfunction toError(str) {\n  return Object.keys(errors)\n    .map(key => errors[key])\n    .find(err => err.message === str) || new Error(str);\n}\n\nmodule.exports = {\n  PREFIX_SEPARATOR: '|',\n  KEY_SEPARATOR: '#',\n  STORAGE_PREFIX: 'capsule',\n  NOT_FOUND: errors.NOT_FOUND,\n  CONNECTION_MAX_TIMEOUT: 2000,\n  MESSAGE_MAX_TIMEOUT: 8000,\n  SERVER_ERROR: errors.SERVER_ERROR,\n  toError,\n  LOCAL_STORAGE_UNSUPPORTED: errors.LOCAL_STORAGE_UNSUPPORTED,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./utils/constants.js","'use strict';\n\nconst greedySplit = require('greedy-split');\nconst connectMessageChannel = require('message-channel/connect');\nconst BaseStorage = require('../base-storage');\nconst {CONNECTION_MAX_TIMEOUT, MESSAGE_MAX_TIMEOUT, toError} = require('../utils/constants');\n\nclass FrameStorageStrategy extends BaseStorage {\n  constructor(target, origin, token, opts = {}) {\n    super();\n    this.target = target;\n    this.origin = origin;\n    this.token = token;\n    this.channel;\n    this.opts = opts;\n    const {connectionMaxTimeout = CONNECTION_MAX_TIMEOUT, messageMaxTimeout = MESSAGE_MAX_TIMEOUT} = this.opts;\n    this.connectionMaxTimeout = connectionMaxTimeout;\n    this.messageMaxTimeout = messageMaxTimeout;\n  }\n\n  getChannel() {\n    if (this.channel) {\n      return Promise.resolve(this.channel);\n    }\n\n    return connectMessageChannel('data-capsule', {\n      target: this.target,\n      origin: this.origin,\n      connectionMaxTimeout: this.connectionMaxTimeout,\n      messageMaxTimeout: this.messageMaxTimeout\n    })\n      .then(channel => {\n        this.channel = channel;\n        return channel;\n      });\n  }\n\n  sendCommand(method, params) {\n    const payload = {data: params};\n\n    return this.getChannel()\n      .then(sendToChannel => {\n        const message = [this.token, method, JSON.stringify(payload)].join('|');\n\n        return sendToChannel(message)\n          .then(e => {\n            const [status, payload] = greedySplit(e.data, '|', 2);\n            if (status === 'reject') {\n              throw toError(payload);\n            }\n\n            return JSON.parse(payload).data;\n          });\n      });\n  }\n\n  setItem(...params) {\n    return this.sendCommand('setItem', params);\n  }\n\n  getItem(...params) {\n    return this.sendCommand('getItem', params);\n  }\n\n  removeItem(...params) {\n    return this.sendCommand('removeItem', params);\n  }\n\n  getAllItems(...params) {\n    return this.sendCommand('getAllItems', params);\n  }\n}\n\nmodule.exports = FrameStorageStrategy;\n\n\n\n// WEBPACK FOOTER //\n// ./strategies/frame-storage.js","module.exports = require('./dist/src/connect/connect');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/message-channel/connect.js\n// module id = 15\n// module chunks = 0 1","'use strict';\n\nvar _constants = require('../constants');\n\nvar _utils = require('../utils');\n\nvar _sendFactory = require('./send-factory');\n\nvar _sendFactory2 = _interopRequireDefault(_sendFactory);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction connect(scope) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var _options$targetOrigin = options.targetOrigin,\n      targetOrigin = _options$targetOrigin === undefined ? '*' : _options$targetOrigin,\n      _options$connectionMa = options.connectionMaxTimeout,\n      connectionMaxTimeout = _options$connectionMa === undefined ? _constants.deafultConnectionMaxTimeout : _options$connectionMa,\n      _options$messageMaxTi = options.messageMaxTimeout,\n      messageMaxTimeout = _options$messageMaxTi === undefined ? _constants.deafultMessageMaxTimeout : _options$messageMaxTi;\n\n\n  return new Promise(function (resolve, reject) {\n    setTimeout(function () {\n      reject(new Error('max timeout of ' + connectionMaxTimeout + 'ms exceeded'));\n    }, connectionMaxTimeout);\n\n    var channel = new window.MessageChannel();\n\n    channel.port1.onmessage = function (e) {\n      if (e.data === _constants.connectionSuccessMsg) {\n        return resolve((0, _sendFactory2.default)(channel.port1, { messageMaxTimeout: messageMaxTimeout }));\n      } else {\n        reject(new Error('connection could not establise'));\n      }\n    };\n\n    var connectionMessage = (0, _utils.constructConnectionMessage)(scope);\n    window.parent.postMessage(connectionMessage, targetOrigin, [channel.port2]);\n  });\n}\n\nmodule.exports = connect;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/message-channel/dist/src/connect/connect.js\n// module id = 16\n// module chunks = 0 1","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = sendFactory;\n\nvar _utils = require('../utils');\n\nvar _v = require('uuid/v4');\n\nvar _v2 = _interopRequireDefault(_v);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction sendFactory(port, options) {\n  var messageMaxTimeout = options.messageMaxTimeout;\n\n  var messages = {};\n\n  port.onmessage = function (e) {\n    var _parseChannelMessage = (0, _utils.parseChannelMessage)(e.data),\n        id = _parseChannelMessage.id,\n        payload = _parseChannelMessage.payload;\n\n    if (messages[id]) {\n      var modifiedEvent = {\n        data: payload,\n        origin: e.origin,\n        lastEventId: e.lastEventId,\n        source: e.source,\n        ports: e.ports\n      };\n\n      messages[id](modifiedEvent);\n    }\n  };\n\n  return function (message, transferList) {\n    return new Promise(function (resolve, reject) {\n      setTimeout(function () {\n        reject(new Error('max timeout of ' + messageMaxTimeout + 'ms exceeded'));\n      }, messageMaxTimeout);\n\n      var messageId = (0, _v2.default)();\n      var packaged = (0, _utils.constructChannelMessage)(message, messageId);\n      messages[messageId] = resolve;\n      return port.postMessage(packaged, transferList);\n    });\n  };\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/message-channel/dist/src/connect/send-factory.js\n// module id = 17\n// module chunks = 0 1","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/uuid/v4.js\n// module id = 18\n// module chunks = 0 1","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/uuid/lib/rng-browser.js\n// module id = 19\n// module chunks = 0 1","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/uuid/lib/bytesToUuid.js\n// module id = 20\n// module chunks = 0 1","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.parseConnectionMessage = exports.constructConnectionMessage = exports.parseChannelMessage = exports.constructChannelMessage = undefined;\n\nvar _constants = require('./constants');\n\nvar constructChannelMessage = exports.constructChannelMessage = function constructChannelMessage(payload, id) {\n  if (!id) {\n    return payload;\n  }\n\n  return id + _constants.messageDelimiter + payload;\n};\n\nvar parseChannelMessage = exports.parseChannelMessage = function parseChannelMessage(message) {\n  var firstDelimiterIndex = message.indexOf(_constants.messageDelimiter);\n  if (firstDelimiterIndex === -1) {\n    return { id: null, payload: message };\n  }\n\n  var id = message.slice(0, firstDelimiterIndex);\n  var payload = message.slice(firstDelimiterIndex + 1);\n  return { id: id, payload: payload };\n};\n\nvar constructConnectionMessage = exports.constructConnectionMessage = function constructConnectionMessage(scope) {\n  return _constants.connectionRequestMsg + _constants.messageDelimiter + scope;\n};\n\nvar parseConnectionMessage = exports.parseConnectionMessage = function parseConnectionMessage(message) {\n  var firstDelimiterIndex = message.indexOf(_constants.messageDelimiter);\n  if (firstDelimiterIndex === -1 || message.slice(0, firstDelimiterIndex) !== _constants.connectionRequestMsg) {\n    throw new Error('Invalid connection message');\n  }\n\n  var scope = message.slice(firstDelimiterIndex + 1);\n  return scope;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/message-channel/dist/src/utils.js\n// module id = 3\n// module chunks = 0 1 2","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar connectionRequestMsg = exports.connectionRequestMsg = 'req_con';\nvar connectionSuccessMsg = exports.connectionSuccessMsg = 'connection_success';\nvar messageDelimiter = exports.messageDelimiter = '|';\nvar deafultConnectionMaxTimeout = exports.deafultConnectionMaxTimeout = 200;\nvar deafultMessageMaxTimeout = exports.deafultMessageMaxTimeout = 5000;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/message-channel/dist/src/constants.js\n// module id = 4\n// module chunks = 0 1 2","'use strict';\n\nfunction greedySplit(str, separator, limit) {\n  var result = str.split(separator, limit);\n  if (result.length === limit) {\n    var length = 0;\n    if (typeof separator === 'string') {\n      length = result.join(separator).length;\n    } else {\n      length = result.reduce(function (l, x, i) {\n        var separatorLength = 0;\n        if (i + 1 < limit) {\n          separatorLength = str.slice(l).match(separator).shift().length;\n        }\n        return l + x.length + separatorLength;\n      }, 0);\n    }\n    result[limit - 1] += str.slice(length);\n  }\n  return result;\n}\n\nmodule.exports = greedySplit;\n//# sourceMappingURL=index.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/greedy-split/dist/src/index.js\n// module id = 5\n// module chunks = 0 1 2","/* global window */\n'use strict';\nconst dataCapsuleTools = require('./frame');\n\nif (typeof window !== 'undefined') {\n  window.DataCapsuleTools = dataCapsuleTools;\n}\n\nmodule.exports = dataCapsuleTools;\n\n\n\n// WEBPACK FOOTER //\n// ./global-frame.js","'use strict';\n\nconst FrameStorageStrategy = require('./strategies/frame-storage');\nconst {NOT_FOUND} = require('./utils/constants');\nconst BaseStorage = require('./base-storage');\nconst DataCapsule = require('./data-capsule');\n\nmodule.exports = {\n  NOT_FOUND,\n  BaseStorage,\n  DataCapsule,\n  FrameStorageStrategy\n};\n\n\n\n// WEBPACK FOOTER //\n// ./frame.js","'use strict';\n\nconst BaseStorage = require('./base-storage');\n\nfunction validateNamespace(options) {\n  if (!options.namespace) {\n    throw new Error('namespace is required');\n  } else if (typeof options.namespace !== 'string') {\n    throw new Error('namespace should be a string');\n  }\n}\n\nclass DataCapsule extends BaseStorage {\n  constructor({strategy, namespace, scope}) {\n    super();\n    this.storageStrategy = BaseStorage.verify(strategy);\n    this._options = {namespace, scope};\n  }\n\n  _buildValidateOptions(capsuleOptions, options) {\n    options = Object.assign({}, capsuleOptions, options);\n    options.scope = this.storageStrategy.extendScope(options.scope);\n    validateNamespace(options);\n    return options;\n  }\n\n  setItem(key, value, options) {\n    options = this._buildValidateOptions(this._options, options);\n    return this.storageStrategy.setItem(key, value, options);\n  }\n\n  getItem(key, options) {\n    options = this._buildValidateOptions(this._options, options);\n    return this.storageStrategy.getItem(key, options);\n  }\n\n  removeItem(key, options) {\n    options = this._buildValidateOptions(this._options, options);\n    return this.storageStrategy.removeItem(key, options);\n  }\n\n  getAllItems(options) {\n    options = this._buildValidateOptions(this._options, options);\n    return this.storageStrategy.getAllItems(options);\n  }\n}\n\nmodule.exports = DataCapsule;\n\n\n\n// WEBPACK FOOTER //\n// ./data-capsule.js"],"sourceRoot":""}